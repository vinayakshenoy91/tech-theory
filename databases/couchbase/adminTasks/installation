- Have docker installed from dockerhub

- https://docs.couchbase.com/server/6.5/install/get-started.html






which docker -> Location

- Download couchbase server 
OR
Docker installation: 
> docker --version
> docker run
> docker stop
> docker start
> docker ps
> docker inspect


docker run -d --name cbNode1 -p 8091-8096:8091-8096 -p 11210:11210 couchbase:enterprise-6.5.0
docker run 0d --name cbNode2 couchbase:enterprise-6.5.0 -> This iis visible inside docker host

docker inspect cbNode2 -> Get Ip address

docker stop cbNode3

docker container ls -a


Cluster creation:
-----------------
1) Questions => Check what machine is recommended by CB
- Linux (Ubuntu 18.04) -> Azure VM
- Public address to VM to SSH and open CB console
- All nodes should be part of same vnet
- Open port 22 for SSH and 8091 for console
- Login to machine. Download couchbase installer
  wget https://......./couchbase-server-enterprise_6.5.0-ubuntu18.04_amd64.deb
- once down, use: sudo dpkg -i couchbase-server....deb
  [4core, 4GB ram recommended]
- Open console and setup cluster. All other services are optional except data.

=> Repeat same step for node 2 till you install everything in the cluster, but when you access the console.
- If you are on same vnet, you can refer other host by using provate ip address and add server from the console opened in first server
- Once server added, click on rebalance
- You can also add host via CLI or REST API

2) Install CB on docker:

docker run -d --name couchbasedb -p 8091-8096:8091-8096 -p 11210-11211:11210-11211 couchbase


Setup in public cloud:
-----------------------
- Start with 3 node cluster of EC2
-> Copy public DNS
- Ssh to target EC2
- rpm installation.
sudo rpm --install couchbase-server...rpm
- Copy DNS with localhost
- New cluster and cluster pwd and uname.
- Set memory quota
- Click on servers and observe the server allocated.
- For further servers, click on add to existing cluster from UI
- Paste the public DNS of already existing node.
- Rebalance to add cluster

Configuring CB:
----------------
COnfig task are:
- Name cluster and validate path
- Decide mem allocation
- Load docs on bucket


Importing large datasets: [Testing a CB import]
-------------------------
cbimport json -c couchbase://127.0.0.1 -u username -p password -b couchmusic -f sample -d file://couchmusic-countries.zip -t 2

In docker: docker cp couchmusic.zip couchmusic:/tmp
docker exec -t couchmusic /bin/bash